# 변경 이력 (Changelog)

## v2.0.0 (2025-10-22)

### 🎉 주요 변경사항

#### 1. 폴링 방식 이미지 캡처로 전환
- **문제**: `/stream` MJPEG 스트림 사용 시 ESP32가 다른 요청 처리 불가 (503 에러)
- **해결**: `/capture` 엔드포인트를 주기적으로 호출하는 폴링 방식 구현
- **효과**:
  - ✅ 영상 모니터링 중에도 모터 제어 가능
  - ✅ LED, 속도, 카메라 설정 동시 제어 가능
  - ✅ ESP32 부하 감소
  - ✅ 안정적인 동작

#### 2. 3열 레이아웃으로 UI 개선
- **Before**: 2열 레이아웃 (카메라 + 제어)
- **After**: 3열 레이아웃
  - 좌측: 카메라 영상 + 시스템 상태
  - 중앙: 모터 제어 + 속도 제어 + LED 토글
  - 우측: 카메라 설정
- **효과**: 공간 효율성 향상, 직관적인 UI

#### 3. LED 토글 스위치 추가
- **Before**: 켜기/끄기/토글 버튼 3개
- **After**: 토글 스위치 1개 + ON/OFF 상태 표시
- **효과**: 더 직관적이고 모던한 UI

#### 4. config.py 중앙 설정 파일 도입
- 모든 설정값을 `config.py`에서 관리
- UI 텍스트, API 엔드포인트, 파라미터 범위 등 중앙화
- 환경변수 지원 강화

### 📝 상세 변경사항

#### 추가된 기능
- `/capture` 엔드포인트 추가 (Flask 서버)
- `IMAGE_CAPTURE_INTERVAL` 설정 추가 (FPS 조절 가능)
- LED 토글 스위치 UI 컴포넌트
- 3열 반응형 레이아웃
- config.py 설정 파일

#### 수정된 기능
- 이미지 로딩 방식: 스트림 → 폴링
- JavaScript: `startImageCapture()` 함수 추가
- CSS: 3열 그리드 레이아웃 적용
- HTML: 구조 개선 (column-left, column-center, column-right)

#### 제거된 기능
- 없음 (하위 호환성 유지)

### ⚙️ 권장 설정

```python
# config.py
IMAGE_CAPTURE_INTERVAL = 200  # 200ms = 5 FPS (권장)
```

**FPS 선택 가이드:**
- 100ms (10 FPS): 부드러운 영상, 약간의 부하
- 200ms (5 FPS): **균형잡힌 설정 (권장)**
- 500ms (2 FPS): 낮은 부하, 명령 우선

### 🔧 마이그레이션 가이드

기존 사용자는 별도 작업 없이 바로 사용 가능합니다.

1. 서버 재시작
```bash
cd frontend
python app.py
```

2. (선택) FPS 조정
```python
# config.py 200번째 줄
IMAGE_CAPTURE_INTERVAL = 200  # 원하는 값으로 조정
```

### 🐛 버그 수정
- ESP32 스트림 중 503 에러 발생 문제 해결
- 다중 명령 동시 처리 불가 문제 해결
- 레이아웃 공간 낭비 문제 개선

### 📚 문서 업데이트
- README.md 전면 개편
- config.py 설정 가이드 추가
- 문제 해결 섹션 강화
- CHANGELOG.md 추가

---

## v1.0.0 (이전 버전)

### 초기 릴리스
- MJPEG 스트림 방식 영상
- 2열 레이아웃
- 기본 모터/LED/카메라 제어 기능

